{% extends 'base.html' %}

{% load static %}

{% block title %} Cart {% endblock %}

{% block content %}

    <!-- empty cart -->
    <div v-if="cart_list.length == 0" class="container bg-light mt-5 py-5 px-5 rounded">
        <h3 class="mb-4">
            <i class="fa-solid fa-list-check"></i>
            <span class="ms-2">Order Summary</span>
        </h3>
        <p>
            Your cart is emply.
        </p>
         <hr class="my-5">
        <a href="{% url 'shop' %}" class="btn btn-outline-primary ">Return top Shop</a>
     </div>
    <!-- end of empty cart -->



    <div v-if="cart_list.length > 0" class="container" style="margin:150px auto;">
        <div class="row">
            <div class="p-2 col-sm-12 col-md-12 pb-md-2 col-lg-7 p-lg-0 px-lg-3">
                <!-- render cart -->
                <div v-for="item in cart_list" class="cart-item d-flex align-items-center justify-content-between py-3">
                    <div class="d-flex ">
                        <div class="d-flex justify-content-center align-items-center pe-2 me-3" style="width:50px;border-right:0.3px solid #cdcdcd;" >
                            <!-- this is not use at all -->
                            <input type="checkbox" @change="checkedCart(item.id)"  :checked="item.status"  class="round-50 form-check-input " style="width:20px;height:20px;" >
                            <!-- end of this is not use at all -->
                        </div>
                        <div class="d-flex align-items-center">
                            <div style="width:80px;height:80px;margin-right: 15px">
                                <img
                                v-bind:src="item.image"
                                style="object-fit: fill;width:100%;height:80px;"
                                alt="Gradient T-shirt"
                                class="cart-item-image me-4">
                            </div>
                            <div>
                                <p class="product-title mb-1"> [[ item.name ]] </p>
                                <p class="product-price mb-0"> $[[ item.price ]] </p>
                            </div>
                        </div>
                    </div>

                    <div class="d-flex align-items-center ms-2">
                        <div class="" >
                          <div class="quantity-selector d-flex">
                            <button class="btn btn-sm bg-danger text-light"  @click="subQty(item.id)" >−</button>
                            <span class="quantity-number px-3" > [[ item.qty ]]  </span>

                            <button class="btn btn-sm btn-increase bg-primary text-light"  @click="addQty(item.id)" >+</button>
                          </div>
                        </div>
                        <div class="ms-4">
                            <button  @click="deleteCart(item.id)"  type="button" class="btn btn-sm rounded-circle rounded-50 bg-danger text-light" >
                               <i class="fa-solid fa-trash"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <!-- end of render cart -->
            </div>

            <div class="p-2 col-sm-12 col-md-12 pt-md-3 col-lg-5 p-lg-0 px-lg-3">
                <div class="order-summary ">
                    <h3>Order Summary</h3>
                    <div class="summary-item">
                        <span class="label">Subtotal</span>
                        <span id="sub_total">$ [[ totalAmount.total ]]</span>
                    </div>
                    <div class="summary-item">
                        <span class="label">Delivery Fee</span>
                        <span class="value">$ 2</span>
                    </div>
                    <hr class="my-3">
                    <div class="summary-total">
                        <div class=" d-flex">
                            <p class="label">Total</p>
                            <p class="ms-auto">
                                <span>$</span>
                                <span id="total"> [[ totalAmount.total_usd]] </span>
                            </p>
                        </div>
                        <div class=" d-flex">
                            <p class="label">Total</p>
                            <p class="ms-auto">
                                <span>រ</span>
                                <span id="total"> [[ totalAmount.total_kh]] </span>
                            </p>
                        </div>
                    </div>

                    <a href="/checkout" id="btnCheckOut" disabled class="btn w-100 btn-checkout" style="background-color:#68df65">Go to Checkout</a>
                </div>
            </div>
        </div>
    </div>

{% endblock %}